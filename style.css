:root{
  --panel-bg: rgba(255,255,255,0.74);
  --stroke: rgba(255,255,255,0.55);
  --gold: #b08a3c;
  --shadow: 0 18px 45px rgba(0,0,0,0.22);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: url("bg-floral.png") center/cover fixed no-repeat;
  color:#111;
}

body.locked{
  overflow:hidden;
  touch-action:none;
}

.page{
  min-height:100vh;
}

/* ===== sparkles ===== */
#sparkles{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:50;
  opacity:0;
  transition: opacity .4s ease;
}
#sparkles.on{ opacity:1; }

.sparkle{
  position:absolute;
  width:6px;
  height:6px;
  border-radius:50%;
  background: radial-gradient(circle, rgba(255,230,155,1) 0%, rgba(255,230,155,0) 70%);
  filter: drop-shadow(0 0 8px rgba(255,220,120,.7));
  animation: floatSparkle linear infinite;
}
@keyframes floatSparkle{
  0%   { transform: translate3d(0,0,0) scale(0.85); }
  50%  { transform: translate3d(0,-18px,0) scale(1.15); }
  100% { transform: translate3d(0,0,0) scale(0.85); }
}

/* ===== sound button ===== */
.soundBtn{
  position:fixed;
  right:16px;
  bottom:18px;
  z-index:60;
  border:none;
  border-radius:999px;
  width:54px;
  height:54px;
  display:grid;
  place-items:center;
  background: rgba(176,138,60,0.85);
  color:#fff;
  box-shadow: 0 12px 30px rgba(0,0,0,.25);
  cursor:pointer;
  opacity:0;
  transform: translateY(10px);
  pointer-events:none;
  transition: opacity .35s ease, transform .35s ease;
}
.soundBtn.show{
  opacity:1;
  transform:none;
  pointer-events:auto;
}

/* ===== stage ===== */
.stage{
  min-height: 100svh;
  display:grid;
  place-items:center;
  padding: 24px 14px;
}

.frame{
  width:min(520px, 92vw);
  position:relative;
  display:grid;
  place-items:center;
}

/* envelope */
.envelope{
  width:100%;
  height:auto;
  display:block;
  border-radius: 20px;
  box-shadow: var(--shadow);
  user-select:none;
  -webkit-user-drag:none;
  position:relative;
  z-index:1;
}

/* seal click area (hide OPEN text visually) */
.sealBtn{
  position:absolute;
  inset:auto;
  left:50%;
  top:44%;
  transform: translate(-50%,-50%);
  width:120px;
  height:120px;
  border-radius:999px;
  border:none;
  background: transparent;
  cursor:pointer;
  z-index:10;

  /* hide text */
  color:transparent;
  font-size:0;
}
.sealBtn::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:999px;
}
.sealBtn.hide{
  opacity:0;
  pointer-events:none;
  transition: opacity .25s ease;
}

/* card that slides up */
.flipContainer{
  position:absolute;
  left:50%;
  bottom:6%;
  transform: translateX(-50%) translateY(30px);
  width:min(420px, 86vw);
  aspect-ratio: 3 / 4;
  opacity:0;
  z-index:20;
  pointer-events:none;
}
.flipContainer.show{
  opacity:1;
  transform: translateX(-50%) translateY(0);
  transition: transform .9s cubic-bezier(.18,.9,.22,1), opacity .45s ease;
}
.flipContainer.ready{
  pointer-events:auto;
}

/* flipping card */
.flipCard{
  width:100%;
  height:100%;
  position:relative;
  border-radius: 16px;
  overflow:hidden;
  box-shadow: var(--shadow);
  transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;
  transition: transform 900ms cubic-bezier(.2,.9,.2,1);
  will-change: transform;
}
.flipCard.flipped{
  transform: rotateY(180deg) translateZ(0);
}

.cardFace{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit: cover;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  transform: translateZ(0);
  user-select:none;
  -webkit-user-drag:none;
}

.cardBack{
  transform: rotateY(180deg) translateZ(0);
}

.flipHint{
  text-align:center;
  margin-top:10px;
  font-weight:700;
  color:#111;
  text-shadow: 0 2px 10px rgba(255,255,255,.65);
}

/* ===== sections after open (hidden until seal) ===== */
.afterOpen{
  opacity:0;
  transform: translateY(14px);
  pointer-events:none;
  transition: opacity .55s ease, transform .55s ease;
}
body.opened .afterOpen{
  opacity:1;
  transform:none;
  pointer-events:auto;
}

/* ===== generic section styles ===== */
.section{
  width:100%;
  padding: 26px 14px;
  display:grid;
  place-items:center;
}

.panel{
  width:min(520px, 92vw);
  background: var(--panel-bg);
  border: 1px solid var(--stroke);
  border-radius: 18px;
  box-shadow: var(--shadow);
  padding: 18px 16px;
  backdrop-filter: blur(8px);
}

.panelTitle{
  margin: 0 0 12px 0;
  text-align:center;
  letter-spacing:.08em;
  font-size: 18px;
}

/* ===== doa section ===== */
/* Repeat bg vertically to look like 2-3 times on mobile */
.doa{
  width:100%;
  background-image: url("background_doa.png");
  background-repeat: repeat-y;
  background-position: center top;
  background-size: 100% auto;
  padding: 0;
}

/* Make it tall so scroll reveals line-by-line */
.doaInner{
  width:min(720px, 96vw);
  min-height: 240svh; /* taller = more room for scroll reveal */
  padding: 34px 12px 40px;
  display:flex;
  justify-content:center;
}

/* sticky text box so it stays readable */
.doaTextBox{
  position: sticky;
  top: 12svh;
  width:min(560px, 92vw);
  display:flex;
  flex-direction:column;
  gap:12px;
}

.doaTextBox .line{
  margin:0;
  padding: 12px 14px;
  border-radius: 14px;
  background: rgba(255,255,255,0.62);
  border: 1px solid rgba(255,255,255,0.6);
  backdrop-filter: blur(8px);
  box-shadow: 0 10px 26px rgba(0,0,0,0.18);
  opacity:0;
  transform: translateY(10px);
  transition: opacity .5s ease, transform .5s ease;
  line-height:1.35;
  font-size: 16px;
}

.doaTextBox .line.bold{
  font-weight: 800;
  text-shadow: 0 1px 0 rgba(255,255,255,.55);
}

.doaTextBox .line.show{
  opacity:1;
  transform:none;
}

/* ===== countdown ===== */
.countdown{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:10px;
  margin: 10px 0 10px;
}
.cdItem{
  background: rgba(255,255,255,0.65);
  border: 1px solid rgba(255,255,255,0.6);
  border-radius: 14px;
  padding: 10px 8px;
  text-align:center;
}
.cdItem span{
  display:block;
  font-weight:900;
  font-size: 22px;
}
.cdItem small{
  display:block;
  opacity:.75;
  margin-top:4px;
  font-size: 12px;
}

.eventInfo{
  text-align:center;
  margin: 8px 0 14px;
  font-weight: 800;
  letter-spacing: .02em;
}

/* ===== buttons ===== */
.btnRow{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
}
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding: 12px 16px;
  border-radius: 999px;
  text-decoration:none;
  font-weight: 800;
  border: 1px solid rgba(255,255,255,0.5);
  box-shadow: 0 12px 26px rgba(0,0,0,0.18);
}
.btn.gold{
  background: rgba(176,138,60,0.88);
  color:#fff;
}

/* ===== gallery swipe slider ===== */
.galleryTrack{
  width:100%;
  display:flex;
  overflow-x:auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  gap:0;
  border-radius: 16px;
}
.galleryTrack::-webkit-scrollbar{ display:none; }

.gallerySlide{
  flex: 0 0 100%;
  scroll-snap-align: center;
  padding: 0;
}
.gallerySlide img{
  width:100%;
  height: min(58vh, 520px);
  object-fit: contain;      /* shows full image without cropping */
  background: rgba(255,255,255,0.28);
  border-radius: 16px;
  display:block;
}

/* dots */
.dots{
  display:flex;
  justify-content:center;
  gap:8px;
  margin-top: 12px;
}
.dot{
  width:10px;
  height:10px;
  border-radius:50%;
  border:none;
  background: rgba(0,0,0,0.22);
  cursor:pointer;
}
.dot.active{
  background: rgba(176,138,60,0.9);
}

.footerSpace{
  height: 36px;
}

/* ===== small screens tuning ===== */
@media (max-width: 420px){
  .sealBtn{
    width:100px;
    height:100px;
    top:45%;
  }
  .flipContainer{
    width: 88vw;
  }
  .doaTextBox .line{
    font-size: 15px;
  }
}
