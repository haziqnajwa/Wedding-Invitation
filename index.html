<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wedding Invitation</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body class="locked">
  <!-- sparkles -->
  <div id="sparkles"></div>

  <!-- music -->
  <audio id="bgm" src="music.mp3" loop></audio>

  <!-- music toggle -->
  <button id="musicBtn" class="musicBtn" aria-label="Toggle music">ğŸ”Š</button>

  <main class="page">
    <!-- ENVELOPE STAGE -->
    <section class="stage">
      <div class="frame">
        <img id="envelopeImg" class="envelope" src="envelope.png" alt="Envelope" />

        <!-- seal click area (no visible text) -->
        <button id="sealBtn" class="sealBtn" aria-label="Open envelope"></button>

        <!-- flip card (card1 <-> card2) -->
        <div id="flipContainer" class="flipContainer" aria-label="Invitation card">
          <div id="flipCard" class="flipCard" role="button" aria-label="Flip card">
            <img class="cardFace" src="card1.png" alt="Card front" />
            <img class="cardFace cardBack" src="card2.png" alt="Card back" />
          </div>
          <div class="flipHint">Tap card to flip</div>
        </div>
      </div>
    </section>

    <!-- DOA -->
    <section class="section doa" id="doaSection">
      <div class="sectionFrame">
        <img class="fullCard" src="background_doa.png" alt="Doa background" />

        <!-- Text overlay (bold + readable) -->
        <div class="doaText" id="doaText">
          <p class="line"><b>ÙˆÙÙ…ÙÙ†Ù’ Ø¡ÙØ§ÙŠÙÙ€Ù°ØªÙÙ‡ÙÛ¦Ù“ Ø£ÙÙ†Ù’ Ø®ÙÙ„ÙÙ‚Ù Ù„ÙÙƒÙÙ…...</b></p>
          <p class="line"><b>And among His signs He created spouses...</b></p>
          <p class="line"><b>and placed affection and mercy...</b></p>
        </div>
      </div>
    </section>

    <!-- ACTIONS -->
    <section class="section actions" id="actionsSection">
      <div class="panel">
        <h2 class="panelTitle">Countdown</h2>

        <div class="countdown">
          <div class="cdItem"><span id="cdDays">0</span><small>Days</small></div>
          <div class="cdItem"><span id="cdHours">0</span><small>Hours</small></div>
          <div class="cdItem"><span id="cdMins">0</span><small>Mins</small></div>
          <div class="cdItem"><span id="cdSecs">0</span><small>Secs</small></div>
        </div>

        <!-- âœ… Event date/time (added) -->
        <div class="eventInfo">
          <span class="eventLine">ğŸ“… Sabtu â€¢ 2 Mei 2026</span>
          <span class="eventLine">â° 11:30 AM â€“ 3:30 PM</span>
        </div>

        <div class="btnRow">
          <a class="btn gold" target="_blank" rel="noopener"
             href="https://maps.app.goo.gl/8GJP5vLRk6EGKELW9">
            ğŸ“ Google Map
          </a>

          <!-- IMPORTANT: replace YOUR_RSVP_LINK -->
          <a class="btn gold" target="_blank" rel="noopener"
             href="YOUR_RSVP_LINK">
            ğŸ“ RSVP
          </a>
        </div>
      </div>
    </section>

    <!-- GALLERY (swipe slider) -->
    <section class="section gallery">
      <div class="panel">
        <h2 class="panelTitle">Gallery</h2>

        <div class="galleryTrack" id="galleryTrack" aria-label="Gallery slider">
          <div class="gallerySlide"><img src="gallery1.jpeg" alt="Gallery 1"></div>
          <div class="gallerySlide"><img src="gallery2.jpeg" alt="Gallery 2"></div>
          <div class="gallerySlide"><img src="gallery3.jpeg" alt="Gallery 3"></div>
          <div class="gallerySlide"><img src="gallery4.jpeg" alt="Gallery 4"></div>
        </div>

        <div class="dots" id="dots" aria-label="Gallery dots">
          <button class="dot active" aria-label="Slide 1"></button>
          <button class="dot" aria-label="Slide 2"></button>
          <button class="dot" aria-label="Slide 3"></button>
          <button class="dot" aria-label="Slide 4"></button>
        </div>
      </div>
    </section>

    <footer class="footerSpace"></footer>
  </main>

  <script>
    const weddingDate = new Date("May 2, 2026 11:30:00").getTime();

    const body = document.body;
    const sealBtn = document.getElementById("sealBtn");
    const envelope = document.getElementById("envelopeImg");
    const flipContainer = document.getElementById("flipContainer");
    const flipCard = document.getElementById("flipCard");
    const sparkles = document.getElementById("sparkles");

    const music = document.getElementById("bgm");
    const musicBtn = document.getElementById("musicBtn");

    // lock scroll until seal is tapped
    function lockScroll() {
      body.classList.add("locked");
      window.scrollTo(0, 0);
    }
    function unlockScroll() {
      body.classList.remove("locked");
    }
    lockScroll();

    // seal click: open envelope, start sparkle, start music, show flip card, enable scroll
    sealBtn.addEventListener("click", () => {
      envelope.src = "envelope_open.png";
      sealBtn.style.display = "none";

      startSparkles();

      music.play().then(() => {
        musicBtn.textContent = "ğŸ”Š";
      }).catch(() => {
        // autoplay might be blocked on some browsers; button still works
      });

      unlockScroll();
      flipContainer.classList.add("show");
    });

    // flip card
    flipCard.addEventListener("click", () => {
      flipCard.classList.toggle("flipped");
    });

    // music toggle button
    musicBtn.addEventListener("click", () => {
      if (music.paused) {
        music.play().catch(() => {});
        musicBtn.textContent = "ğŸ”Š";
      } else {
        music.pause();
        musicBtn.textContent = "ğŸ”ˆ";
      }
    });

    // sparkles
    function startSparkles() {
      sparkles.innerHTML = "";
      for (let i = 0; i < 60; i++) {
        const s = document.createElement("span");
        s.className = "sparkle";
        s.style.left = Math.random() * 100 + "%";
        s.style.top = Math.random() * 100 + "%";
        s.style.animationDuration = (2 + Math.random() * 3) + "s";
        s.style.animationDelay = (Math.random() * 2) + "s";
        sparkles.appendChild(s);
      }
      sparkles.classList.add("on");
    }

    // countdown
    function updateCountdown() {
      const d = weddingDate - Date.now();
      const days = Math.max(0, Math.floor(d / 86400000));
      const hours = Math.max(0, Math.floor(d / 3600000) % 24);
      const mins = Math.max(0, Math.floor(d / 60000) % 60);
      const secs = Math.max(0, Math.floor(d / 1000) % 60);

      document.getElementById("cdDays").textContent = days;
      document.getElementById("cdHours").textContent = hours;
      document.getElementById("cdMins").textContent = mins;
      document.getElementById("cdSecs").textContent = secs;
    }
    updateCountdown();
    setInterval(updateCountdown, 1000);

    // gallery swipe slider
    const track = document.getElementById("galleryTrack");
    const dots = Array.from(document.querySelectorAll("#dots .dot"));
    let index = 0;

    function setSlide(i) {
      index = Math.max(0, Math.min(i, 3));
      track.style.transform = `translateX(${-index * 100}%)`;
      dots.forEach((d, di) => d.classList.toggle("active", di === index));
    }

    dots.forEach((d, i) => d.addEventListener("click", () => setSlide(i)));

    // touch swipe
    let startX = 0;
    let isDown = false;

    track.addEventListener("touchstart", (e) => {
      isDown = true;
      startX = e.touches[0].clientX;
    }, { passive: true });

    track.addEventListener("touchend", (e) => {
      if (!isDown) return;
      isDown = false;
      const endX = (e.changedTouches && e.changedTouches[0]) ? e.changedTouches[0].clientX : startX;
      const dx = endX - startX;

      if (Math.abs(dx) > 40) {
        if (dx < 0) setSlide(index + 1);
        else setSlide(index - 1);
      }
    }, { passive: true });

    // optional: mouse drag swipe (desktop)
    track.addEventListener("mousedown", (e) => {
      isDown = true;
      startX = e.clientX;
    });
    window.addEventListener("mouseup", (e) => {
      if (!isDown) return;
      isDown = false;
      const dx = e.clientX - startX;
      if (Math.abs(dx) > 60) {
        if (dx < 0) setSlide(index + 1);
        else setSlide(index - 1);
      }
    });

    // keep user at top when locked
    window.addEventListener("scroll", () => {
      if (body.classList.contains("locked")) window.scrollTo(0, 0);
    });
  </script>
</body>
</html>
